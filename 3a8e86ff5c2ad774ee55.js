import"normalize.css";import"./index.css";import Player from"./classes/Player";import dom from"./dom";const players=[new Player("real"),new Player("computer")],boards=[dom.createBoard(players[0].name),dom.createBoard(players[1].name)];for(const e in players[0].gameboard.fleet)dom.showShip(e,players[0].gameboard.fleet[e].length);let selectedShip="";function setTurn(e){for(let o=0;o<2;o++)boards[o].dataset.clickable=dom.boardsDiv.children[o].classList[1]!==e.name}function findWinner(e){for(const o of players)o.name!==e&&setTimeout((()=>alert(o.name+" won!!")),125);dom.boardsDiv.dataset.end=!0}!function(){function e(){setTurn(players[0]);for(let e=0;e<2;e++)for(const o of boards[e].children)o.addEventListener("click",(()=>{const a=dom.getPositionCoordinates(o);"false"===boards[e].dataset.clickable||players[e].gameboard.board[a.row][a.column].shot||"true"===dom.boardsDiv.dataset.end||(players[e].gameboard.receiveAttack(a.row,a.column)?dom.colorPosition(players[e].name,[a.row,a.column],"red"):(dom.colorPosition(players[e].name,[a.row,a.column],"grey"),setTurn(players[e])),players[e].isFleetSunk()&&findWinner(players[e].name))}));!function(){const e=boards[1].children;for(const o of e)o.addEventListener("click",(function e(){const o=boards[0].children[Math.round(99*Math.random())],a=dom.getPositionCoordinates(o);players[0].gameboard.board[a.row][a.column].shot?e():(setTimeout((()=>o.click()),500),players[0].gameboard.board[a.row][a.column].ship&&e())}))}()}!function(){for(const e of dom.containerDiv.children)e.addEventListener("click",(()=>{for(const e of dom.containerDiv.children)"true"===e.dataset.placed?dom.colorShip(e.classList[1],"green"):dom.colorShip(e.classList[1],"blue");if(players[0].gameboard.fleet[e.classList[1]].placed)return selectedShip="",dom.disableOrientation(),void alert("This ship has been placed already.");selectedShip=e.classList[1],dom.colorShip(selectedShip,"yellow"),dom.disableOrientation(!1),dom.disableRandomPositioning(!1)}));dom.RandomPosButton.addEventListener("click",(()=>{const e=boards[0].children;!function o(){dom.orientationRadios[Math.round(Math.random())].click(),e[Math.round(99*Math.random())].click(),players[0].gameboard.fleet[selectedShip].placed||o()}()}))}(),function(){for(const a of boards[0].children)a.addEventListener("click",(()=>{if(!players[0].isFleetPlaced()&&""!==selectedShip)if(players[0].gameboard.placeShip(selectedShip,[parseInt(a.dataset.row),parseInt(a.dataset.column)],dom.getOrientation()),players[0].gameboard.fleet[selectedShip].placed){for(const e of players[0].gameboard.fleet[selectedShip].positions)dom.colorPosition(players[0].name,e,"green");dom.colorShip(selectedShip,"green"),dom.disableOrientation(),dom.disableRandomPositioning();for(const e of dom.containerDiv.children)e.classList[1]===selectedShip&&(e.dataset.placed=!0);o(),players[1].isFleetPlaced()&&e()}else dom.colorShip(selectedShip,"red")}));function o(){players[1].gameboard.placeShip(selectedShip,[Math.round(9*Math.random()),Math.round(9*Math.random())],1===Math.round(Math.random())),players[1].gameboard.fleet[selectedShip].placed||o()}}()}(),setTimeout((()=>alert("Select a ship by clicking it. Choose it's orientation and place the ship by clicking a position in your board.")),62);